<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" >
    <title>Validator Testing</title>
    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.js" ></script>
    <script type="text/javascript" src="./validator.js" ></script>
</head>
<body>
    <form action="" id="register">
        <p>普通文本: <input type="text" name="username" value="" /></p>
        <p>单选框: <input type="radio" name="gender" value="male" />男 <input type="radio" name="gender" value="female" />女</p>
        <p>复选框: <input type="checkbox" name="hobby" value="2" />男孩 <input type="radio" name="hobby" value="1" />女孩</p>
        <p>密码: <input type="password" name="password" value="" /></p>
        <p>确认密码: <input type="password" name="confirmpassword" value="" /></p>
        <p>下拉选择：
            <select name="city">
                <option value="1">北京</option>
                <option value="2">上海</option>
            </select> 
        </p>
        <p>文本域：<textarea name="desc" value></textarea></p>
        <p><input type="submit" name="dosubmit" value="提交" /></p>
    </form>

    <button id="btn1">BUTTON 1</button>

    <script type="text/javascript">
        // 自定义函数
        // 正则表达式
        // 非空必须
        // 二次比对
        // 异步验证

        var instance = Validator({
            
            events: {
                'error:username': 'usernameError',
                'error': 'error',
                'success': 'success',
                'focus:username': ''
            },

            // optional 
            fields: {
                username: {
                    // 验证规则
                    rules: [/\w/, function() {
                        return false;
                    }, 'server http://www.baidu.com'],
                    // 非提交为空时是否检测
                    checkEmpty: false,
                    // 错误信息
                    message: '错哒',
                    // 错误信息显示位置
                    messageTo: '',
                    // 是否必须
                    required: true,
                    // optional
                    serverCallback: function() {
                        return true;
                    }
                },
                gender: {
                    required: true,
                    message: '错哒',
                },
                hobby: {
                    required: true,
                    message: '错哒',
                },
                confirmpassword: {
                    rules: 'confirm password',
                    message: '错哒',
                },
                city: {
                    required: true,
                    message: '错哒',
                },
                desc: {
                    required: true,
                    message: '错哒',
                },
                password: {
                    required: true,
                    message: '错哒',
                }
            },

            autoSubmit: true,

            // required
            formSelector: '#register'
        });

        instance.extend({
            error: function(options) {
                console.log(options.$node);
                console.log(options.message);
            },
            
            success: function() {

            },

            usernameError: function(options) {
                options.$node.css('border', '1px solid red');
            }
        });
            

        //instance();
    </script>
</body>
</html>





